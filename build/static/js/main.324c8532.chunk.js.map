{"version":3,"sources":["tweet-utils.js","Tweet.js","FloatyLinks.js","Spinner.js","utils.js","BookOfTweets.js","useBookOfTweets.js","HomePage.js","App.js","reportWebVitals.js","index.js"],"names":["TWEET_LENGTH","length","tweetIsValid","tweet","wholeString","nextCharAfterTweet","lastCharOfTweet","tweetIsWholeBook","tweetEndsInOrIsFollowedByASpace","includes","config","genConfig","Tweet","i","tweets","splitOnBy","title","split","author","bookName","slice","className","toLowerCase","replaceAll","FloatyLinks","showTitle","setShowTitle","onClick","replace","to","Spinner","sleep","time","Promise","resolve","setTimeout","BookOfTweets","useParams","id","useState","book","setBook","howManyTweets","setHowManyTweets","isLoading","setIsLoading","handleShowMore","a","handleSpaceOrEnter","code","useEffect","fetch","res","json","data","load","window","addEventListener","removeEventListener","useBookOfTweets","arr","newTweet","push","makeArray","map","Boolean","HomePage","topBooks","setTopBooks","filteredBooks","setFilteredBooks","filter","setFilter","brokenBooks","it","href","onChange","e","target","value","App","exact","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.324c8532.chunk.js","sourcesContent":["const RAW_TWEET_LENGTH = 240;\nconst ELLIPSES_LENGTH = ('. . .'.length) * 2;\nconst RANGE_LENGTH = ('(3000/5000))'.length);\nconst TWEET_LENGTH = RAW_TWEET_LENGTH - ELLIPSES_LENGTH - RANGE_LENGTH;\n\nexport function tweetIsValid(tweet, wholeString) { \n  const nextCharAfterTweet = wholeString[tweet.length];\n  const lastCharOfTweet = tweet[tweet.length - 1];\n\n  const tweetIsWholeBook = wholeString.length <= 240;\n  const tweetEndsInOrIsFollowedByASpace = [nextCharAfterTweet, lastCharOfTweet].includes(' ');\n\n  return tweetIsWholeBook || tweetEndsInOrIsFollowedByASpace;\n}\n\nexport function makeArray(book) {\n  \n  // book = book.replace(/\\n/g, '');\n  const arr = [];\n\n  while (book.length) {\n    let newTweet = book.slice(0, TWEET_LENGTH);\n\n    // ask, is newTweet valid?\n    // TODO: implement rule so that tweets dont cut off in the middle of a word. what does \"tweet cut off perfectly at end of word\"/\"valid tweet\" mean? it means:\n    // 1) the last character of a tweet IS a space or \n    // 2) the last character of a tweet is FOLLOWED BY a space\n\n    while (!tweetIsValid(newTweet, book)) {\n      newTweet = book.slice(0, newTweet.length - 1);\n    }\n\n    arr.push(newTweet);\n    book = book.slice(newTweet.length);\n  }\n\n  return arr;\n}\n\n","import React from 'react';\nimport Avatar, { genConfig } from 'react-nice-avatar';\n\nconst config = genConfig(); \n\nexport default function Tweet({ \n  tweet, \n  i, \n  tweets: { length }, \n  title,\n}) {\n  const splitOnBy = title.split(' by ');\n  const author = splitOnBy[splitOnBy.length - 1];\n  const bookName = splitOnBy.slice(0, splitOnBy.length - 1);\n  return <section className='tweet'>\n    <div className='left'>\n      <Avatar className='avatar' {...config} />\n    </div>\n    <div className='right'>\n      <p className='author'>\n        <span className='name'>{bookName}</span> \n        <span className='handle'>{`@${author.toLowerCase().replaceAll(' ', '')}`}</span></p>\n      <p className='message' key={tweet}>\n        {tweet}\n        {i === 0 ? 'ðŸ§µ' : ` ${i + 1}/${length}`}\n      </p>\n    </div>\n  </section>;\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport default function FloatyLinks({ showTitle, setShowTitle, title }) {\n  return (\n    <>\n      {\n        showTitle &&\n      <nav className=\"sticky footer\" onClick={() => setShowTitle(false)}>\n        <div>\n          <h4>{title.replace(/(\\n)/g, '')}</h4>\n        </div>\n        <div className='x'>\n            X\n        </div>\n      </nav>     \n      }\n        \n\n      <Link to=\"/\">\n        <section className=\"sticky link-home\">\n            Home\n        </section>\n      </Link>\n    </>\n  );\n}\n","import React from 'react';\n\nexport default function Spinner() {\n  return (\n    <div className=\"lds-ripple\">\n      <div></div>\n      <div></div>\n    </div>\n  );\n}\n","export function sleep(time) {\n  return new Promise((resolve) => {\n    setTimeout(() => resolve(true), time);\n  });\n}","import './App.css';\nimport { makeArray } from './tweet-utils';\nimport Tweet from './Tweet';\nimport FloatyLinks from './FloatyLinks';\nimport Spinner from './Spinner';\nimport { useBookOfTweets } from './useBookOfTweets';\n\nexport default function BookOfTweets() {  \n  const { \n    title,\n    book,\n    showTitle, setShowTitle,\n    howManyTweets,\n    isLoading,\n    handleShowMore\n  } = useBookOfTweets();\n\n  const tweets = makeArray(book);\n\n  return (\n    <>\n      <FloatyLinks title={title} showTitle={showTitle} setShowTitle={setShowTitle} />\n\n      <div className=\"App\">\n        <main>\n          {\n            tweets.slice(0, howManyTweets).map((tweet, i) => <Tweet \n              key={tweet + i} \n              tweet={tweet} \n              tweets={tweets} \n              title={title}\n              i={i}\n            />)\n          }\n          \n          {isLoading && <Spinner />}\n\n          {\n            Boolean(book.length) && \n            <p className='show-more-tweets' onClick={handleShowMore}>\n              show more tweets\n            </p>\n          }\n\n        </main>\n      </div>\n    </>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { sleep } from './utils';\n\nexport function useBookOfTweets() {\n  const { id, title } = useParams();\n  const [book, setBook] = useState('');\n  const [showTitle, setShowTitle] = useState(true);\n  const [howManyTweets, setHowManyTweets] = useState(3);\n  const [isLoading, setIsLoading] = useState(false);\n    \n  async function handleShowMore() {\n    setIsLoading(true);\n    await sleep(500);\n    setHowManyTweets(howManyTweets + 2);\n    setIsLoading(false);\n  }\n\n  async function handleSpaceOrEnter({ code }) {\n    if (code === 'Space' || code === 'Enter') handleShowMore();\n  }\n  \n\n  useEffect(() =>{\n    async function load() {\n      setIsLoading(true);\n  \n      const res = await fetch(`/.netlify/functions/book?id=${id}`);\n      const json = await res.json();\n  \n      setBook(json.data);\n      setIsLoading(false);\n    }\n  \n    load();\n  \n  }, [id]);\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleSpaceOrEnter);\n\n    return () => window.removeEventListener('keydown', handleSpaceOrEnter);\n  });\n\n  return {\n    id, title,\n    book, setBook,\n    showTitle, setShowTitle,\n    howManyTweets, setHowManyTweets,\n    isLoading, setIsLoading,\n    handleShowMore\n  };\n}","import { useEffect, useState } from 'react';\nimport './App.css';\nimport { Link } from 'react-router-dom';\nimport Spinner from './Spinner';\nexport default function HomePage() {\n  const [topBooks, setTopBooks] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [filteredBooks, setFilteredBooks] = useState(topBooks);\n  const [filter, setFilter] = useState('');\n\n\n  useEffect(() =>{\n    async function load() {\n      setIsLoading(true);\n\n      const res = await fetch(`/.netlify/functions/top-books`);\n      const json = await res.json();\n\n      setTopBooks(json.data);\n      \n      setIsLoading(false);\n    }\n\n    load();\n  }, []);\n  \n  useEffect(() => {\n    const brokenBooks = ['Little Women; Or, Meg, Jo, Beth, and Amy by Louisa May Alcott', 'The Complete Works of William Shakespeare by William Shakespeare'].map(it => `${it.toLowerCase()} `); // add a weird space at the end of the title to account from apparent error in my regex in top-books function.\n\n    const filteredBooks = topBooks\n      .filter(book => \n        !brokenBooks.includes(book.title.toLowerCase()) &&\n        book.title.toLowerCase().includes(filter.toLowerCase())\n      );\n\n    setFilteredBooks(filteredBooks);\n  }, [filter, topBooks]);\n\n  return (\n    <div className=\"home-page\">\n      <section className=\"list\">\n        <div className='description'>\n          <h1>Gutenscroll</h1>\n          <h2>\n            <div>A doom-scrollable compendium of </div>\n            <div>\n              <a href=\"https://www.gutenberg.org/browse/scores/top\">Project Gutenberg&apos;s</a> most popular books\n            </div>\n          </h2>\n        </div>\n\n        <label>\n          Filter Books\n          <input onChange={e => setFilter(e.target.value)} />\n        </label>\n\n        { isLoading && <div className='home-spinner-container'>\n          <Spinner />\n        </div>}\n\n        {\n          filteredBooks.map((book, i) => \n            <Link to={`book/${book.id}/${book.title}`} key={book + i}>\n              <p className='list-title'>{book.title}</p>\n            </Link>)\n        }\n      </section>\n    </div>\n  );\n}\n","import {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n} from 'react-router-dom';\nimport BookOfTweets from './BookOfTweets';\nimport HomePage from './HomePage';\nimport './loading-io.css';\n\nexport default function App() {\n  return (\n    <Router>\n      <div className='route-wrapper'>\n        <Switch>\n          <Route exact path=\"/\">\n            <HomePage />\n          </Route>\n          <Route exact path=\"/book/:id/:title\">\n            <BookOfTweets />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}