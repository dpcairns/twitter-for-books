(this["webpackJsonpreact-base-template"]=this["webpackJsonpreact-base-template"]||[]).push([[0],{15:function(e,t,n){},24:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(16),r=n.n(a),i=(n(24),n(7)),o=n(2),l=(n(15),240-2*". . .".length-"(3000/5000))".length);function j(e,t){var n=t[e.length],c=e[e.length-1],s=t.length<=240,a=[n,c].includes(" ");return s||a}var u=n(19),h=n(12),b=n.n(h),d=n(0),O=Object(h.genConfig)();function f(e){var t=e.tweet,n=e.i,c=e.tweets.length,s=e.title.split(" by "),a=s[s.length-1],r=s.slice(0,s.length-1);return Object(d.jsxs)("section",{className:"tweet",children:[Object(d.jsx)("div",{className:"left",children:Object(d.jsx)(b.a,Object(u.a)({className:"avatar"},O))}),Object(d.jsxs)("div",{className:"right",children:[Object(d.jsxs)("p",{className:"author",children:[Object(d.jsx)("span",{className:"name",children:r}),Object(d.jsx)("span",{className:"handle",children:"@".concat(a.toLowerCase().replaceAll(" ",""))})]}),Object(d.jsxs)("p",{className:"message",children:[t,0===n?"\ud83e\uddf5":" ".concat(n+1,"/").concat(c)]},t)]})]})}function p(e){var t=e.showTitle,n=e.setShowTitle,c=e.title;return Object(d.jsxs)(d.Fragment,{children:[t&&Object(d.jsxs)("nav",{className:"sticky footer",onClick:function(){return n(!1)},children:[Object(d.jsx)("div",{children:Object(d.jsx)("h4",{children:c.replace(/(\n)/g,"")})}),Object(d.jsx)("div",{className:"x",children:"X"})]}),Object(d.jsx)(i.b,{to:"/",children:Object(d.jsx)("section",{className:"sticky link-home",children:"Home"})})]})}function x(){return Object(d.jsxs)("div",{className:"lds-ripple",children:[Object(d.jsx)("div",{}),Object(d.jsx)("div",{})]})}var m=n(5),w=n.n(m),v=n(8),g=n(6);function k(e){return new Promise((function(t){setTimeout((function(){return t(!0)}),e)}))}function y(){var e=function(){var e=Object(o.f)(),t=e.id,n=e.title,s=Object(c.useState)(""),a=Object(g.a)(s,2),r=a[0],i=a[1],l=Object(c.useState)(!0),j=Object(g.a)(l,2),u=j[0],h=j[1],b=Object(c.useState)(3),d=Object(g.a)(b,2),O=d[0],f=d[1],p=Object(c.useState)(!1),x=Object(g.a)(p,2),m=x[0],y=x[1];function N(){return S.apply(this,arguments)}function S(){return(S=Object(v.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,k(500);case 3:f(O+2),y(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return L.apply(this,arguments)}function L(){return(L=Object(v.a)(w.a.mark((function e(t){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Space"!==(n=t.code)&&"Enter"!==n||N();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){function e(){return(e=Object(v.a)(w.a.mark((function e(){var n,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,fetch("/.netlify/functions/book?id=".concat(t));case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,i(c.data),y(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),Object(c.useEffect)((function(){return window.addEventListener("keydown",T),function(){return window.removeEventListener("keydown",T)}})),{id:t,title:n,book:r,setBook:i,showTitle:u,setShowTitle:h,howManyTweets:O,setHowManyTweets:f,isLoading:m,setIsLoading:y,handleShowMore:N}}(),t=e.title,n=e.book,s=e.showTitle,a=e.setShowTitle,r=e.howManyTweets,i=e.isLoading,u=e.handleShowMore,h=function(e){for(var t=[];e.length;){for(var n=e.slice(0,l);!j(n,e);)n=e.slice(0,n.length-1);t.push(n),e=e.slice(n.length)}return t}(n);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p,{title:t,showTitle:s,setShowTitle:a}),Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)("main",{children:[h.slice(0,r).map((function(e,n){return Object(d.jsx)(f,{tweet:e,tweets:h,title:t,i:n},e+n)})),i&&Object(d.jsx)(x,{}),Boolean(n.length)&&Object(d.jsx)("p",{className:"show-more-tweets",onClick:u,children:"show more tweets"})]})})]})}function N(){var e=Object(c.useState)([]),t=Object(g.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(!1),r=Object(g.a)(a,2),o=r[0],l=r[1],j=Object(c.useState)(n),u=Object(g.a)(j,2),h=u[0],b=u[1],O=Object(c.useState)(""),f=Object(g.a)(O,2),p=f[0],m=f[1];return Object(c.useEffect)((function(){function e(){return(e=Object(v.a)(w.a.mark((function e(){var t,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,fetch("/.netlify/functions/top-books");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,s(n.data),l(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(c.useEffect)((function(){var e=["Little Women; Or, Meg, Jo, Beth, and Amy by Louisa May Alcott","The Complete Works of William Shakespeare by William Shakespeare"].map((function(e){return"".concat(e.toLowerCase()," ")})),t=n.filter((function(t){return!e.includes(t.title.toLowerCase())&&t.title.toLowerCase().includes(p.toLowerCase())}));b(t)}),[p,n]),Object(d.jsx)("div",{className:"home-page",children:Object(d.jsxs)("section",{className:"list",children:[Object(d.jsxs)("div",{className:"description",children:[Object(d.jsx)("h1",{children:"Gutenscroll"}),Object(d.jsxs)("h2",{children:[Object(d.jsx)("div",{children:"A doom-scrollable compendium of "}),Object(d.jsxs)("div",{children:[Object(d.jsx)("a",{href:"https://www.gutenberg.org/browse/scores/top",children:"Project Gutenberg's"})," most popular books"]})]})]}),Object(d.jsxs)("label",{children:["Filter Books",Object(d.jsx)("input",{onChange:function(e){return m(e.target.value)}})]}),o&&Object(d.jsx)("div",{className:"home-spinner-container",children:Object(d.jsx)(x,{})}),h.map((function(e,t){return Object(d.jsx)(i.b,{to:"book/".concat(e.id,"/").concat(e.title),children:Object(d.jsx)("p",{className:"list-title",children:e.title})},e+t)}))]})})}n(35);function S(){return Object(d.jsx)(i.a,{children:Object(d.jsx)("div",{className:"route-wrapper",children:Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{exact:!0,path:"/",children:Object(d.jsx)(N,{})}),Object(d.jsx)(o.a,{exact:!0,path:"/book/:id/:title",children:Object(d.jsx)(y,{})})]})})})}var T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(S,{})}),document.getElementById("root")),T()}},[[36,1,2]]]);
//# sourceMappingURL=main.324c8532.chunk.js.map